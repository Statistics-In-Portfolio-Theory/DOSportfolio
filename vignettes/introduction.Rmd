---
title: "An introduction to the Dynamic Optimal Shrinkage Portfolio package"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{introduction}
  %\VignetteIndKexEntry{introduction}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

This package is a collection of the methods developed in [references]()...
It concerns one case which is central to managing portfolios, how to transition from one portfolio to a new one optimally.

To install the package you need to run `devtools::install_github("Statistics-In-Portfolio-Theory/DOSPortfolio")`, which demands that you have installed `devtools`. To load the package, run
```{r setup}
library(DOSPortfolio)
```

# How to use the package
The main interface to the package is `DOSPortfolio::DOSPortfolio` which acts as a wrapper for `DOSPortfolio::wGMVOverlapping`  and `DOSPortfolio::wGMVNonOverlapping`. The big perk of using the interface is that you get input validation and more informative errors. You could use the functions directly, which would most likely not throw an error (with an exception of specific degenerate cases), though the results might not make sense. Lets simulate some data, in our simple example we assume the (log) returns are given by a t-distribution with 5 degrees of freedom.
```{r sims}
n <- 25*2
p <- 5
data <- matrix(rt(n*p, df=5), ncol=p, nrow=n)
```
Notice that it is a matrix on _long_ format. Each column is assumed to be the time series of an asset. _We assume that the returns are ordered in time_. The observation on the first row was observed before the observations on the second and so forth. To construct the DOS portfolio we need to specify the number of _change points_ and when these happen. Since `data` is a matrix on long format, we work with the row index. The DOS portfolio is then constructed as
```{r dosportfolio}
change_points <- c(25, 40)
# use the first subsample to estimate the relative loss
(portfolios <- DOSPortfolio(data, change_points))
```

The first parameter we configure is the number of change points and when they happen. These are specified in the `change_points` vector. These specify when you recompute the weights. In this case we re-weight our portfolio on the 25th observation and 40th observation. Notice that there we do not include the last 10 observations, there are only 2 change points as these are what is specified. If you wanted to include a third change point.

which compute Global Mimimum Variance portfolios in a dynamic optimal shrinkage scheme. Both  S3 class for the 
The portfolio is computed using a convex combination. On the first transition, given by the first element of break points,
the function shrinks towards the target weights. On the second transition (if there exists one) we shrink towards the previous
estimate of the GMV portfolio where each weight is based of non-overlapping samples. This function estimates each GMV portfolio
using the most recent data, e.g. from the last break point to the current. The data used for the estimation of the portfolio weights
is therefore is not overlapping.

## Use together with tsibble and the tidyverse


The portfolio 

# Suggestion, use tsibble and tidyverse! 

# Closing remarks

# References

 1. ...
